<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>promise í•¨ìˆ˜</title>
  </head>
  <body>
    <script>
      function getBanana() {
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve("ðŸŒ");
          }, 1000);
        });
      }

      function getApple() {
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve("ðŸŽ");
          }, 3000);
        });
      }
      function getOrange() {
        // .reject(new Error) : jsì—ì„œ ì¼ë¶€ëŸ¬ ì—ëŸ¬ë¥¼ ë‚´ê²Œ í•´ì£¼ëŠ” ë³€ìˆ˜
        return new Promise.reject(new Error("ì˜¤ë Œì§€ ì—†ìŒ"));
      }
      getBanana()
        .then((banana) => getApple().then((apple) => [banana, apple]))
        // console.log ìƒëžµë²•
        .then(console.log);

      // Promise.all : ë²™ë ¬ì ìœ¼ë¡œ í•œë²ˆì— Promiseë“¤ì„ ì‹¤í–‰. í•˜ë‚˜ì˜ í”„ë¡œë¯¸ìŠ¤ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ë¥¼ ì—ëŸ¬ë¡œ ì²˜ë¦¬í•¨
      Promise.all([getBanana(), getApple()]).then((fruits) =>
        console.log("all", fruits)
      );

      //   Promise.race : ì£¼ì–´ì§„ Promiseì¤‘ì— ê°€ìž¥ ë¹¨ë¦¬ ìˆ˜í–‰ëœ ê²ƒì´ ì‹¤í–‰
      Promise.race([getBanana(), getApple()]).then((fruits) =>
        console.log("race", fruits)
      );

      //   Promise.allSettled : ì—¬ëŸ¬ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ë˜ í•˜ë‚˜ì˜ í”„ë¡œë¯¸ìŠ¤ê°€ ì‹¤íŒ¨í•´ë„ ë¬´ì¡°ê±´ ì´í–‰
      Promise.allSettled([getBanana(), getApple(), getOrange()])
        .then((fruits) => console.log("allSettled", fruits))
        .catch(console.log);
    </script>
  </body>
</html>
